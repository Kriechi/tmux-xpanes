## Generate test cases in .travis.yml
## 1. Install pict https://github.com/Microsoft/pict
## 2. Execute following commands on Bash
## $ pict travis.pict | sed 1d | sort -k1,2 -k3n | awk '{a[$1" "$2]=a[$1" "$2]" "$3}END{for(k in a){print k"    "a[k]}}' | sort -k1,1 | perl -anle 'print "- os: linux\n  env: SH=bash SH_VERSION=$F[0] TMUX_VERSION=$F[1] CASES=@{[join \",\", @F[2..$#F]]}"' | sed 's/^/        /'

bash:4.0,4.1,4.2,4.3,4.4
tmux:1.8,1.9,1.9a,2.0,2.1,2.2,2.3,2.4,2.5,2.6,2.7

## Create test cases
# cat cases_all.sh | grep '@case:' | awk '{print $NF}' | xargs | tr ' ' ',' | awk '{print "case:"$0}'
case:1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53

## Create exceptional conditions
# cat cases_all.sh | grep -E '@skip: ?.' -B1 | awk '{print $2,$3}' | awk 'NF{print $2}' | xargs -n 2 | tr , ' ' | awk '{for (i=2;i<=NF;i++){print $1,$i}}' | awk '{print "IF[case] = "$1" THEN [tmux] <> \""$2"\";"}'

IF[case] = 2 THEN [tmux] <> "1.8";
IF[case] = 2 THEN [tmux] <> "2.3";
IF[case] = 6 THEN [tmux] <> "1.8";
IF[case] = 6 THEN [tmux] <> "2.3";
IF[case] = 31 THEN [tmux] <> "1.8";
IF[case] = 32 THEN [tmux] <> "1.8";
IF[case] = 49 THEN [tmux] <> "1.8";
IF[case] = 49 THEN [tmux] <> "2.3";
IF[case] = 50 THEN [tmux] <> "1.8";
IF[case] = 50 THEN [tmux] <> "2.3";
IF[case] = 51 THEN [tmux] <> "1.8";
IF[case] = 51 THEN [tmux] <> "2.3";
IF[case] = 52 THEN [tmux] <> "1.8";
IF[case] = 52 THEN [tmux] <> "2.3";
IF[case] = 53 THEN [tmux] <> "1.8";
IF[case] = 53 THEN [tmux] <> "2.3";

## Assign sequential number to the case
# perl -i -ple 'BEGIN{my $num=0}; s/\@case: .*$/\@case: @{[++$num]}/;' cases_all.sh

## Calculate
# Normal: 55(environment combination) * 53 (test cases) = 2915 cases
# Pairwise: 568 cases
